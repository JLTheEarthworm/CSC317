let current = '';
let operator = '';
let firstOperand = null;
let memory = 0;

const display = document.getElementById("display");
const memoryIndicator = document.getElementById("memory-indicator");

function updateDisplay() {
  display.textContent = current || '0';
  memoryIndicator.textContent = memory !== 0 ? 'M' : '';
}

function clear() {
  current = '';
  operator = '';
  firstOperand = null;
  updateDisplay();
}

document.querySelectorAll("button").forEach(button => {
  const action = button.dataset.action;
  const value = button.textContent;

  button.addEventListener("click", () => {
    switch (action) {
      case "mc":
        memory = 0;
        updateDisplay();
        break;
      case "mr":
        current = memory.toString();
        updateDisplay();
        break;
      case "m-plus":
        memory += parseFloat(current || "0");
        updateDisplay();
        break;
      case "m-minus":
        memory -= parseFloat(current || "0");
        updateDisplay();
        break;
      case "clear":
        clear();
        break;
      case "sign":
        if (current) current = (parseFloat(current) * -1).toString();
        updateDisplay();
        break;
      case "percent":
        if (current) current = (parseFloat(current) / 100).toString();
        updateDisplay();
        break;
      case "decimal":
        if (!current.includes(".")) current += ".";
        updateDisplay();
        break;
      case "equals":
        if (operator && firstOperand !== null) {
          const secondOperand = parseFloat(current);
          switch (operator) {
            case "+": current = (firstOperand + secondOperand).toString(); break;
            case "-": current = (firstOperand - secondOperand).toString(); break;
            case "*": current = (firstOperand * secondOperand).toString(); break;
            case "/": current = secondOperand !== 0 ? (firstOperand / secondOperand).
